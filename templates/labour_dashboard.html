{% extends "base.html" %}
{% block content %}

<style>
.labour-grid{
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:18px;
}

.labour-card{
    height:220px;
    border-radius:18px;
    color:white;
    text-decoration:none;
    display:flex;
    align-items:center;
    justify-content:center;
    box-shadow:0 8px 18px rgba(0,0,0,0.15);
    position:relative;
}

.labour-content{
    width:85%;
}

.labour-content h2{
    margin-bottom:15px;
    font-size:22px;
}

.stat{
    display:flex;
    justify-content:space-between;
    margin:10px 0;
    font-size:16px;
}

.reset-btn{
    display:inline-block;
    margin-top:12px;
    padding:8px 14px;
    background:white;
    color:black;
    border-radius:8px;
    font-weight:bold;
    text-decoration:none;
}

.pay-card{
    background:#0f172a !important;
    font-size:22px;
    font-weight:bold;
}
</style>

<h2 style="margin-bottom:20px;">ðŸ‘· Labour Dashboard</h2>

<div class="labour-grid">

    {% for g in groups %}
    <div class="labour-card" style="background: {{ g.color }};">
        <div class="labour-content">
            <a href="/labour-details/{{ g.code }}" style="color:white;text-decoration:none;">
                <h2>{{ g.name }}</h2>

                <div class="stat">
                    <span>Total Sadaram</span>
                    <b>{{ "%.2f"|format(g.sadaram) }}</b>
                </div>

                <div class="stat">
                    <span>Advance Paid</span>
                    <b>{{ "%.2f"|format(g.advance) }}</b>
                </div>
            </a>

            {% if session.role == 'owner' %}
            <a href="/reset-labour/{{ g.code }}"
               onclick="return confirm('Are you sure you want to reset this labour group?')"
               class="reset-btn">
                RESET
            </a>
            {% endif %}
        </div>
    </div>
    {% endfor %}

    <!-- PAY ADVANCE CARD -->
    <a href="/pay-labour" class="labour-card pay-card">
        ðŸ’° PAY ADVANCE
    </a>

</div>

{% endblock %}